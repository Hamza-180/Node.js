'use strict';

const { MongooseError } = require('./');

/**
 * Version Error class.
 *
 * This error is thrown when a version mismatch is detected while updating a document.
 *
 * @extends MongooseError
 * @private
 */
class VersionError extends MongooseError {
  /**
   * Version Error constructor.
   *
   * @param {Object} params
   * @param {Document} params.doc - The document with the version mismatch.
   * @param {Number} params.currentVersion - The current version of the document.
   * @param {Array<String>} params.modifiedPaths - The paths that were modified in the document.
   * @api private
   */
  constructor({ doc, currentVersion, modifiedPaths }) {
    const modifiedPathsStr = modifiedPaths.join(', ');
    super(`No matching document found for id "${doc._id}" version ${currentVersion} modifiedPaths "${modifiedPathsStr}"`);
    this.version = currentVersion;
    this.modifiedPaths = modifiedPaths;
  }
}

module.exports = VersionError;
