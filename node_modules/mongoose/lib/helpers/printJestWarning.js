'use strict';

const utils = require('../utils');

const isJest = typeof jest !== 'undefined';
const isJsDom = typeof window !== 'undefined';
const isMockTimers = setTimeout.clock != null && typeof setTimeout.clock.Date === 'function';

const suppressJestWarnings = process.env.SUPPRESS_JEST_WARNINGS;

if (isJest && !suppressJestWarnings) {
  if (isJsDom) {
    utils.warn(`
      Mongoose: looks like you're trying to test a Mongoose app with Jest's
      default jsdom test environment. Please make sure you read Mongoose's
      docs on configuring Jest to test Node.js apps:
      https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true
      to hide this warning.
    `);
  }

  if (isMockTimers) {
    utils.warn(`
      Mongoose: looks like you're trying to test a Mongoose app with Jest's mock
      timers enabled. Please make sure you read Mongoose's docs on configuring Jest
      to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the
      SUPPRESS_JEST_WARNINGS to true to hide this warning.
    `);
  }
}

