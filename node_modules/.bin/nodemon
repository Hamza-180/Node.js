#!/bin/sh

# Get the basedir using realpath for better cross-platform compatibility
if command -v realpath > /dev/null 2>&1; then
  basedir=$(realpath "$(dirname "$0")")
else
  basedir=$(cd "$(dirname "$0")" && pwd)
fi

# Use cygpath to convert the path to Windows format on Cygwin, Mingw or MSYS
case `uname` in
    *CYGWIN*|*MINGW*|*MSYS*)
        if command -v cygpath > /dev/null 2>&1; then
            basedir=$(cygpath -w "$basedir")
        fi
    ;;
esac

# Check if the nodemon executable exists in the parent directory of the script
if [ -x "$basedir/node" ]; then
  exec "$basedir/node" "$basedir/../nodemon/bin/nodemon.js" "$@"
else
  # If node is not found in the parent directory, check if it's in the system path
  if command -v node > /dev/null 2>&1; then
    exec node "$basedir/../nodemon/bin/nodemon.js" "$@"
  else
    echo "Error: node and nodemon executables not found in the system path."
    exit 1
  fi
fi

